webpackJsonp([2],{C08o:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Dd8w"),i=a.n(n),r=a("Xxa5"),o=a.n(r),s=a("exGp"),l=a.n(s),u={data:function(){return{tableData:[],uniformData:{},listLoading:!1,searchInputValue:void 0,total:0,page:1,sels:[],curCid:void 0}},computed:{categorFilters:function(){var t=[];return this.goodsCategory.forEach(function(e,a,n){t.push({text:e.title,value:e.id})}),t},filterTableData:function(){var t=new RegExp(this.searchInputValue);return this.tableData.filter(function(e){return t.test(e.title)})}},methods:{gets:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("goodss");case 2:a=e.sent,n=a.goodss,console.log(n),t.tableData=n;case 6:case"end":return e.stop()}},e,t)}))()},filterHandler:function(t,e,a){return e[a.property]===t},addButton:function(){this.uniformData={type:"goods",images:[],cid:this.curCid,publish:!0,pv:this.$store.state.tool.randomNum(1500,2e4),sales:this.$store.state.tool.randomNum(5,100)},this.$refs.uniform.visible=!0},previewButton:function(){},editButton:function(){var t=l()(o.a.mark(function t(e,a){var n,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.get("/goods/"+a._id);case 2:n=t.sent,i=n.goods,this.uniformData=i,this.$refs.uniform.visible=!0;case 6:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),delButton:function(t,e){var a=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){a.$axios.delete("/goods/"+e._id),a.gets()})},batchRemoveButton:function(){var t=this,e=this.sels.map(function(t){return t._id});this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then(function(a){t.$axios.delete("/goodss",{data:{ids:e}}),t.gets()})},handleSizeChange:function(t){console.log("每页 "+t+" 条")},handleCurrentChange:function(t){this.page=t,this.gets()},selsChange:function(t){this.sels=t},submit:function(t){this.uniformData._id?this.$axios.patch("goods",i()({},this.uniformData,{image:this.uniformData.images[0].url})):this.$axios.post("goods",i()({},this.uniformData,{image:this.uniformData.images[0].url})),console.log(t),this.curCid=t,this.gets()}},mounted:function(){this.gets()}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goods"},[a("el-breadcrumb",{staticClass:"border-bottom-small uk-padding-bottom uk-margin-medium-bottom",attrs:{separator:">"}},[a("el-breadcrumb-item",[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("产品")])],1),t._v(" "),a("el-row",[a("el-col",{staticClass:"clearfix"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-input",{staticClass:"uk-margin-left",attrs:{clearable:"","prefix-icon":"el-icon-search",placeholder:"输入名称搜索产品"},model:{value:t.searchInputValue,callback:function(e){t.searchInputValue=e},expression:"searchInputValue"}})],1),t._v(" "),a("el-form-item",{staticClass:"uk-float-right"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit-outline"},on:{click:t.addButton}},[t._v("新增商品")])],1)],1)],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.filterTableData,border:"","highlight-current-row":""},on:{"selection-change":t.selsChange}},[a("el-table-column",{attrs:{type:"selection",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"picture",label:"图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.row.image,expression:"scope.row.image"}],staticStyle:{width:"50px",height:"50px"},attrs:{alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"名称",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"cid",label:"类别",filters:t.categorFilters,"filter-method":t.filterHandler},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n        "+t._s(t.goodsCategory.filter(function(t){return t.id===a.cid})[0].title)+"\n\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"color",label:"颜色"}}),t._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"number",label:"数量",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"flag",label:"推荐",filters:[{value:!0,text:"推荐"},{value:!1,text:"不推荐"}],"filter-method":t.filterHandler},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.flag?a("span",[t._v("推荐")]):a("span")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"publish",label:"上下架",filters:[{value:!0,label:"上架",text:"上架"},{value:!1,label:"下架",text:"下架"}],"filter-method":t.filterHandler},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.publish?a("span",[t._v("上架")]):a("span",[t._v("下架")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.editButton(e.$index,e.row)}}},[t._v("编辑\n        ")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.delButton(e.$index,e.row)}}},[t._v("删除\n        ")])]}}])})],1),t._v(" "),a("el-col",{staticClass:"toolbar uk-margin-top",attrs:{span:24}},[a("el-button",{attrs:{type:"danger",disabled:0===this.sels.length},on:{click:t.batchRemoveButton}},[t._v("批量删除")]),t._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":50,total:t.total},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),a("uniform",{ref:"uniform",attrs:{data:t.uniformData},on:{submit:t.submit}}),t._v(" "),a("div",{staticClass:"test"},[t._v(t._s(t.filterTableData))])],1)},staticRenderFns:[]};var d=a("VU/8")(u,c,!1,function(t){a("IInK")},null,null);e.default=d.exports},IInK:function(t,e){}});
//# sourceMappingURL=2.d462b1a01574de536c28.js.map