# 安装
    npm install pm2 -g


cnpm i pm2 -g

同样需要建立软连接：ln -s /home/nodejs/node-v10.14.2-linux-x64/bin/pm2 /usr/local/bin/pm2



# 配置pm2.json

````


{
  "apps": [
    {
      "name": "app",
      // 应用名称
      "script": "./server/server.js",
      // 实际启动脚本
      "cwd": "./",
      // 当前工作路径
      "watch": [
        // 监控变化的目录，一旦变化，自动重启
        "bin",
        "routers"
      ],
      "ignore_watch": [
        // 从监控目录中排除
        "node_modules",
        "logs",
        "public"
      ],
      "watch_options": {
        "followSymlinks": false
      },
      "error_file": "./logs/app-err.log",
      // 错误日志路径
      "out_file": "./logs/app-out.log",
      // 普通日志路径
      "env": {
        "NODE_ENV": "production"
        // 环境参数，当前指定为生产环境
      }
    },
    {}
  ]
}
````
# 启动
    pm2 start pm2.json
# 浏览
     pm2 ls
# 关闭
    pm2 stop app
# 重启
    pm2 restart app
# 删除进程
    pm2 delete app(name)

# 开机启动

先pm2 start运行你要开机启动的程序， 再pm2 save, 这时可以查看more ~/.pm2/dump.pm2这个文件是否已经有保存到数据, 最后才是pm2 startup

# 日志分割

```

pm2 install pm2-logrotate

```
