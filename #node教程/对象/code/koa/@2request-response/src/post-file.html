<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://cdn.bootcss.com/vue/2.5.17-beta.0/vue.js"></script>
    <script src="https://cdn.bootcss.com/axios/0.18.0/axios.min.js"></script>

</head>
<body>


     
<div id="app">

            <!--accept定义接收的文件类型,这里只接受图片-->
     <img :src="src"/>
      <input id="fileinput" @change="uploading($event)" type="file" accept="image/*">
              
    <button  @click="submit($event)">提交</button>

               <!--图片展示-->
        
</div>


<script>

    const vm = new Vue({
        el: '#app',

        name: 'sample',

        data() {

            return {

                file: '',

                src: ''

            };

        },

        methods: {

            uploading(event) {
                 //获取文件
                this.file = event.target.files[0];
                //本地图片预览------------------------------------
                //兼容ie
                var windowURL = window.URL || window.webkitURL;
                //URL.createObjectURL() 静态方法会创建一个 DOMString，其中包含一个表示参数中给出的对象的URL。
                this.src = windowURL.createObjectURL(event.target.files[0]);

            },

            submit() {

                event.preventDefault();//取消默认行为

                let formdata = new FormData();

                formdata.append('file', this.file);
                console.log(formdata)

                let config = {
                    headers: { "Content-Type": "multipart/form-data" },

                };

                axios.post('http://localhost:3000/api/request-file/', formdata, {
                    headers: { "Content-Type": "multipart/form-data" },

                }).then((res) => {

                    //做处理

                }).catch((error) => {


                });

            }

        }

    });

</script>

<style lang="css" scoped>

</style>


</body>
</html>
