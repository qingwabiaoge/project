<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://cdn.bootcss.com/vue/2.5.17-beta.0/vue.js"></script>
    <script src="https://cdn.bootcss.com/axios/0.18.0/axios.min.js"></script>

</head>
<body>


     
<div id="app">

            <!--accept定义接收的文件类型,这里只接受图片-->
     <img :src="src"/>
      <input id="fileinput" @change="uploading($event)" type="file" accept="image/*">
              
    <button  @click="submit($event)">提交</button>

               <!--图片展示-->
        
</div>


<script>

    const vm = new Vue({
        el: '#app',

        name: 'sample',

        data() {

            return {

                file: '',

                src: ''

            };

        },

        methods: {

            uploading(event) {

                this.file = event.target.files[0];//获取文件
                //本地图片预览------------------------------------
                //兼容ie
                var windowURL = window.URL || window.webkitURL;

                this.file = event.target.files[0];

                //获得src用于预览

                this.src = windowURL.createObjectURL(event.target.files[0]);

                //------------------------------------本地图片预览
            },

            submit() {

                event.preventDefault();//取消默认行为

                let formdata = new FormData();

                formdata.append('file', this.file);


                let config = {

                    headers: {

                        headers: {'Content-Type': 'multipart/form-data'} //之前说的以表单传数据的格式来传递fromdata

                    }

                };

                axios.post('http://localhost:3000/uploadfile', formdata, config).then((res) => {

                    console.log(res)

                }).catch((error) => {


                });

            }

        }

    });

</script>

<style lang="css" scoped>

</style>


</body>
</html>
