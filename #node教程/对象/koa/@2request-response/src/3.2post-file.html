<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <script src="https://cdn.bootcss.com/vue/2.5.17-beta.0/vue.js"></script>
  <script src="https://cdn.bootcss.com/axios/0.18.0/axios.min.js"></script>

</head>
<body>


     
<div id="app">

          <!--accept定义接收的文件类型,这里只接受图片-->
   <img :src="src"/>
   <input id="fileinput" @change="showThumb($event)" type="file" accept="image/*">
            
  <button  @click="submit($event)">提交</button>

             <!--图片展示-->
      
</div>


<script>

const vm = new Vue({
  el: '#app',

  data () {
    return {
      img: '',
    }
  },
  computed: {
    src () {
      if (this.img) {
        //本地图片预览------------------------------------
        var windowURL = window.URL || window.webkitURL  //兼容ie
        //URL.createObjectURL() 静态方法会创建一个 DOMString，其中包含一个表示参数中给出的对象的URL。
        return windowURL.createObjectURL(this.img)
      }

    }

  },

  methods: {

    showThumb (event) {
      //获取文件
      this.img = event.target.files[0]
    },

    submit () {

      event.preventDefault()//取消默认行为

      let formdata = new FormData()

      formdata.append('img', this.img)
      console.log(formdata)

      let config = {
        headers: { 'Content-Type': 'multipart/form-data' },

      }
      console.log(formdata)
      axios.post('http://localhost:3000/api/file/', formdata, {
        headers: { 'Content-Type': 'multipart/form-data' },

      }).then((res) => {

        //做处理

      }).catch((error) => {

      })

    }

  }

})

</script>

<style lang="css" scoped>

</style>


</body>
</html>
