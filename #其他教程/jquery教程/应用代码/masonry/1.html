<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <title>无标题文档</title>
    <!--适合移动屏幕in-->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <!--360一类的浏览器-->
    <meta name="renderer" content="webkit">
    <!--适合移动屏幕 out-->
    <!--微信图标in -->
    <script src="http://cdn.http6.net/jquery.min.js"></script>

    <script src="http://cdn.http6.net/masonry.pkgd.min.js"></script>
    <style>

        .item {
            width: 25%;
        }

        .item a {
            display: inline-block;
            padding: 5px;
        }

        .item img {
            max-width: 100%;

            border: 3px solid #fff;

        }
    </style>

</head>

<body>
<div class="container" style="background: #eee">
    <div class="masonry">
        <div class="item"><a><img src="../../../images/cs1.jpg" alt=""></a></div>
        <div class="item"><a><img src="../../../images/cs2.jpg" alt=""></a></div>
        <div class="item"><a><img src="../../../images/cs3.jpg" alt=""></a></div>
        <div class="item"><a><img src="../../../images/cs1.jpg" alt=""></a></div>
        <div class="item"><a><img src="../../../images/cs2.jpg" alt=""></a></div>
        <div class="item"><a><img src="../../../images/cs3.jpg" alt=""></a></div>
        <div class="item"><a><img src="../../../images/cs1.jpg" alt=""></a></div>
        <div class="item"><a><img src="../../../images/cs2.jpg" alt=""></a></div>
        <div class="item"><a><img src="../../../images/cs3.jpg" alt=""></a></div>


    </div>
</div>
<script>

</script>


<script>


    $(window).load(function () {

        function _masonry() {
            var container = document.querySelector('.masonry');
            var msnry = new Masonry(container, {
//        columnWidth: 80 , //不能用
//        gutter: 20, //不好用
                itemSelector: '.item',

                isAnimated: true,
            });

        }

        _masonry();
        var i = 2
        $(window).scroll(
            function () {


                if (i <= 3 && $(document).scrollTop() >= $(document).height() - $(window).height() - 500) {

                    $(".masonry").append("<div class='temp'></div>").find(".temp").load("page" + i + ".html .item", function () {
                        $(".temp .item").unwrap()
                        _masonry();

                    })


                    i = i + 1
                }

            })


    });


</script>

</body>
</html>
