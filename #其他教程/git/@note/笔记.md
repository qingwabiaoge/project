![](./img/1.tif)



# Git 工作区、暂存区和版本库


* 工作区：即你的电脑里能看到的目录，平时开发代码的地方

* 暂存区：保存临时改动
*
* 版本库：指向最后一次提交的结果





# 新项目

```
git init

```



# 寻找版本号

```
git log --oneline
git log --pretty=oneline

git logref //拉取日志

github上也可以找

```


# 删除缓存区文件rm

如果你想把一个文件从版本控制中移除，并且保留本地的文件，首先需要把这个文件加入到gitignore文件中。然后执行以下命令就可以了。
```
git rm  --cached file_path
```
以上命令将file_path所代表的文件从版本控制中删除，并保留本地文件，此外还要进行commit操作才能将服务器端的文件删掉。如果想把一个文件夹从版本控制中删除并保留本地的文件，只需在上述命令的基础上加上-r参数，即

```
git rm -r  --cached folder_path
```
如果想把所有gitignore中的文件从版本控制中删除的话，需要执行以下两个命令，即先移除所有文件，再执行添加所有文件（这次会忽略gitignore中的文件）。

```
git rm -r  --cached .
git add .
```
# git checkout 拉取到工作区

```
git checkout . //拉取缓存到工作区
git checkout branchA //拉取branchA的最高版本到工作区和缓存

```




# 反做

```
git revert -n 8ce5
```
*![3.png](./img/3.tif "")*

# 分支

每个分支都是一个独立的枝干 commit ,push,reset 都需要分开去做

![](./img/2.tif)



### 列出分支
```
git branch
```
远程分支
```
git branch -r
```


### 切换分支 head到切换分支的最有一个版本
```
git checkout dev
```


### 切换并创建分支
```

$ git branch dev
$ git checkout dev


```

### 从任何版本建立分支

 ```
git checkout a1a1a1 //head移动到任何一次提交,不隐藏以后版本的提交,建立新分支!,

分支重命名 git checkout -b branchA 

 ```

### 分支图打印

![](img/4.png)
```
git log --graph --abbrev-commit --decorate --date=relative --all
```

### 删除分支

```
git branch -d dev
```

### 合并dev分支到当前分支

```
git merge dev
```

### 远程分支

##### 添加远程主机和主机名

```
git remote add origin git@github.com:qingwabiaoge/test.git

```

##### 检查配置是否成功
```
git remote -v 
```

##### 修改远程主机和主机名

```

方法有三种：

1.修改命令

git remote origin set-url [url]

2.先删后加

git remote rm origin
git remote add origin [url]

3.直接修改config文件

```



##### 第一次推送到远程仓库

```

//推送master到远程

git push -u origin master

//推送分支到远程

git push -u origin dev

```

##### 以后的推送和拉取

```
git pull

git push
```

##### 当本地版本低于远程版本,想要本地版本覆盖远程版本 -f强制推入到远程

```
git push -f

```

##### 删除远程分支

```
git push origin --delete xxx
```



# clone项目


```
git clone git@github.com:qingwabiaoge/test.git
```

看不到分支 

```
git checkout dev
```

# 比较



```
git diff  //比较工作区和缓存区

git diff HEAD //比较工作区和HEAD

git diff origin/master

git diff branchA branchB


```

比较追加到文件


```

覆盖 git diff [branchA] [branchB] > a.txt
追加 git diff [branchA] [branchB] >> a.txt
git diff --color > foo.diff
foo.diff用notepad++/sublime 之类的编辑器打开，高亮颜色

```


# 忽略文件

.gitignore



# 命令别名

```

git config --global alias.xxx '开头省去 git xxx xxx xxx'
```

```
git config --global alias.lg " log --graph --abbrev-commit --decorate --date=relative --a
ll"


```




# reset &&checkout


```
git reset a1a1a1 --hard  //head移动到任何一次提交,并隐藏以后版本的提交,隐藏是可逆的

git reset master //head移动到master分支的最新版本的提交,并隐藏以后版本的提交,隐藏是可逆的
```
```
git checkout a1a1a1 //head移动到任何一次提交,不隐藏以后版本的提交,建立新分支!,分支重命名 git checkout -b branchA
git checkout master // header移动到分支的最高版本,不隐藏以后版本的提交

```
```
git checkout . //拉取缓存到工作区

```



![](img/5.tif)

