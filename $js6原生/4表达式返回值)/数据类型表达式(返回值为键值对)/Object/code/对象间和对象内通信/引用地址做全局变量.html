<!--原始版-->
<script>
    {
        let obj = {a: 1}

        function f() {
            const m = 10

            function f2() {
                obj.a = m
            }

            f2()
        }

        function f1() {
            console.log(obj.a)
        }

        f()
        f1()
    }
</script>

<!--进化版-->
<script>{
    let obj = {a: 1}

    function f2(m) {
        obj.a = m
    }

    function f() {
        const m = 10
        f2(m)
    }

    function f1() {
        console.log(obj.a)
    }

    f()
    f1()
}
</script>


<!--再进化版-->
<script>{
    let obj = {
        a: 1,
        f2(m) {
            this.a = m
        }
    }


    function f() {
        const m = 10
        obj.f2(m)
    }

    function f1() {
        console.log(obj.a)
    }

    f()
    f1()
}
</script>


<!--对象注入版-->


<script>
    let store = {
        state: undefined,
        setState(i) {
            this.state = i
        }
    }

    class Vm {
        constructor(a, b) {
            this.a = a;
            this.b = b
            this.$store = store
        }
    }

    let vm = new Vm(1, 2)
    vm.$store.setState(3)


    let vm2 = new Vm(10, 20)
    vm2.$store.setState(30)


    console.log(vm)
    console.log(vm2)


</script>