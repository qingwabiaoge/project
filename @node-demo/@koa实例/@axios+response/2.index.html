<meta charset="utf-8"/>
<script src="https://cdn.bootcss.com/axios/0.18.0/axios.min.js"></script>

<script>
    axios.defaults.baseURL ='http://localhost:4000'
    //拦截并处理数据
    axios.interceptors.response.use(
        // status=2xx的 正确的的走这里
        res => {
            console.log('默认返回的报文res这样的')
            console.log(res)

            if (res.data.code === -1&&res.data.msg) {
                // alert(res.data.data.msg)
            } else {
                if (res.data.msg) {
                   alert(res.data.msg)
                }

                return res.data.data;

            }

        },
        //检测status默认除了2XX之外的都是错误的，就会走这里
        error => {
            if (error.response) {

                switch (error.response.status) {
                    case 401:
                        alert('登陆过期，请重新登陆' )
                        break
                    case 404:
                        alert('404错误，请检查网络' + error.response.statusText)
                        break

                    default:
                        alert('错误:' + error.response.statusText)


                }
            }
            return Promise.reject(error.response);
        }
    );



    axios.post('?a=11').then(_=>{console.log(_)})


</script>