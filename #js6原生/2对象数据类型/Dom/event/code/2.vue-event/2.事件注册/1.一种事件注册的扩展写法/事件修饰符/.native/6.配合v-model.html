<meta charset="UTF-8">
<script src="https://cdn.bootcss.com/vue/2.5.17-beta.0/vue.js"></script>
<script src="https://cdn.bootcss.com/vuex/3.0.1/vuex.js"></script>
<script src="https://cdn.bootcss.com/vue-router/3.0.1/vue-router.min.js"></script>
<script src="https://cdn.bootcss.com/axios/0.18.0/axios.min.js"></script>


<div id="app">

  <base-input v-on:focus="log" @input="log"></base-input>


</div>


<script>

  const baseInput = {
    template: `
              <label>
              label
                <input
                  v-bind="$attrs"
                  value="value"
                  v-on="listeners"
                >
              </label>
              `,
    computed: {
      listeners() {

        return Object.assign({},
          //$listeners 为父标签所有的v-on属性合成对象
          this.$listeners, {
            // 覆盖input事件,为了v-model
            input: event => {
              this.$emit('input', event.target.value)
            }
          }
        )
      }
    },
    created() {
      console.log(this.$listeners)
    }
  }

  new Vue({
    el: '#app',
    methods: {
      log(e) {

        console.log(e)
      }

    },
    components: {
      baseInput
    }

  })


</script>
