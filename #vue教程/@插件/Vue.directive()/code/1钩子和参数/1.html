<body>
<meta charset="UTF-8">
<script src="https://cdn.bootcss.com/vue/2.5.17-beta.0/vue.js"></script>
<link href="https://cdn.bootcss.com/animate.css/3.7.0/animate.css" rel="stylesheet">
<div id="app">
  <button @click="display=!display">btn</button>
  <div v-h:arg="display">
      btn
  </div>

</div>


</body>
<script>
    function toogleShow(el,binding){
        if (binding.value) {
            el.style.display = 'none'
        }else {
            el.style.display = 'block'
        }
    }

    Vue.directive('h', {

        bind: function (el, binding, vnode, oldVnode) {
            console.log('1.bind运行')
            console.log('el',{el})//指令el
            console.log('binding',binding)// 返回对象，用户设置的信息
            console.log('vnode:',vnode)//Vue编译生成的虚拟节点。
            console.log('oldVnode',oldVnode)

        },
        inserted: function (el, binding) {
            console.log('2.inserted运行')
            console.log(binding.value)
            toogleShow(el,binding)
        },
        update: function(el, binding) { //组件更新
            console.log('3.update');
            toogleShow(el,binding)
        },
        componentUpdated: function() { //组件更新完成
            console.log('4.componentUpdated');
        }
        ,
        unbind: function () {
            console.log('5.unbind 只调用一次，指令与元素解绑时调用')
        },
    })
    var app = new Vue({
        el: "#app",
        data: {display:true},

    });

    /*
    * 1、bind:只调用一次，指令第一次绑定到元素时调用，用这个钩子函数可以定义一个绑定时执行一次的初始化动作。
    2、inserted:被绑定元素插入父节点时调用（父节点存在即可调用，不必存在于document中）。
    *
    *
    3、update:被绑定于元素所在的模板更新时调用，而无论绑定值是否变化。通过比较更新前后的绑定值，可以忽略不必要的模板更新。
    4、componentUpdated:被绑定元素所在模板完成一次更新周期时调用。
    *
    *
    5、unbind:只调用一次，指令与元素解绑时调用。
    *
    * */
</script>
