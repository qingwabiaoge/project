<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<script src="https://cdn.bootcss.com/vue/2.5.17-beta.0/vue.js"></script>
<script src="https://cdn.bootcss.com/vuex/3.0.1/vuex.js"></script>
<div id="app">
  <p>
    <!--//router必须挂载在vue上才能用$store-->
    <button @click="add(10)">add(10)</button>
    <button @click="addAction(10)">addAction(10)</button>

  </p>

  {{counter}} ,{{counter2}} {{counter10}},{{counter100}} <br>
</div>
<script>
  const {mapState, mapActions, mapMutations, mapGetters} = Vuex
  const store = new Vuex.Store({
    modules: {
      moduleA: {
        namespaced: true,
        state: {
          counter: 0
        },

        getters: {
          counter10(state) {
            return state.counter + 10
          },
          counter100(state, getters) {
            return getters.counter10 + 100
          }
        },
        mutations: {
          add: (state, n = 1) => state.counter += n,
          po: (state, n = 1) => state.counter -= n
        },
        actions: {

          addAction({commit}) {
            commit('add', 10)
          }

        }
      }
    }
  })

  Vue.mixin({
    computed: {
      ...mapState({
        counter: state => state.moduleA.counter,
        counter2: state => state.moduleA.counter + 1
      }),
      ...mapGetters({
        counter10: 'moduleA/counter10',
        counter100: 'moduleA/counter100'
      })
    },
    methods: {

      ...mapMutations({add: 'moduleA/add'}),
      ...mapActions({addAction: 'moduleA/addAction'})

    }
  })
  const vm = new Vue({
    el: '#app',
    store,

  })
</script>

</body>
</html>
